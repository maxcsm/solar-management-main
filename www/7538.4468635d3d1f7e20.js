"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7538],{1236:(Y,k,h)=>{h.d(k,{GW:()=>A,dk:()=>P,oK:()=>f});var f=function(v){return v.Prompt="PROMPT",v.Camera="CAMERA",v.Photos="PHOTOS",v}(f||{}),A=function(v){return v.Rear="REAR",v.Front="FRONT",v}(A||{}),P=function(v){return v.Uri="uri",v.Base64="base64",v.DataUrl="dataUrl",v}(P||{})},6352:(Y,k,h)=>{h.d(k,{Sd:()=>d,Uw:()=>N,fo:()=>J,xz:()=>F});var f=h(8239);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var E=function(r){return r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",r}(E||{});class F extends Error{constructor(e,n,a){super(e),this.message=e,this.code=n,this.data=a}}const q=r=>{var e,n,a,c,s;const m=r.CapacitorCustomPlatform||null,l=r.Capacitor||{},y=l.Plugins=l.Plugins||{},p=r.CapacitorPlatforms,j=(null===(e=p?.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==m?m.name:(r=>{var e,n;return r?.androidBridge?"android":null!==(n=null===(e=r?.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==n&&n.bridge?"ios":"web"})(r)),ue=(null===(n=p?.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==j()),fe=(null===(a=p?.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||(b=>{const w=ee.get(b);return!(!w?.platforms.has(j())&&!ae(b))}),ae=(null===(c=p?.currentPlatform)||void 0===c?void 0:c.getPluginHeader)||(b=>{var w;return null===(w=l.PluginHeaders)||void 0===w?void 0:w.find(M=>M.name===b)}),ee=new Map,Pe=(null===(s=p?.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((b,w={})=>{const M=ee.get(b);if(M)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),M.proxy;const I=j(),H=ae(b);let L;const ve=function(){var _=(0,f.Z)(function*(){return!L&&I in w?L=L="function"==typeof w[I]?yield w[I]():w[I]:null!==m&&!L&&"web"in w&&(L=L="function"==typeof w.web?yield w.web():w.web),L});return function(){return _.apply(this,arguments)}}(),te=_=>{let T;const Z=(...S)=>{const U=ve().then(x=>{const R=((_,T)=>{var Z,S;if(!H){if(_)return null===(S=_[T])||void 0===S?void 0:S.bind(_);throw new F(`"${b}" plugin is not implemented on ${I}`,E.Unimplemented)}{const U=H?.methods.find(x=>T===x.name);if(U)return"promise"===U.rtype?x=>l.nativePromise(b,T.toString(),x):(x,R)=>l.nativeCallback(b,T.toString(),x,R);if(_)return null===(Z=_[T])||void 0===Z?void 0:Z.bind(_)}})(x,_);if(R){const K=R(...S);return T=K?.remove,K}throw new F(`"${b}.${_}()" is not implemented on ${I}`,E.Unimplemented)});return"addListener"===_&&(U.remove=(0,f.Z)(function*(){return T()})),U};return Z.toString=()=>`${_.toString()}() { [capacitor code] }`,Object.defineProperty(Z,"name",{value:_,writable:!1,configurable:!1}),Z},le=te("addListener"),ce=te("removeListener"),we=(_,T)=>{const Z=le({eventName:_},T),S=function(){var x=(0,f.Z)(function*(){const R=yield Z;ce({eventName:_,callbackId:R},T)});return function(){return x.apply(this,arguments)}}(),U=new Promise(x=>Z.then(()=>x({remove:S})));return U.remove=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield S()}),U},ne=new Proxy({},{get(_,T){switch(T){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return H?we:le;case"removeListener":return ce;default:return te(T)}}});return y[b]=ne,ee.set(b,{name:b,proxy:ne,platforms:new Set([...Object.keys(w),...H?[I]:[]])}),ne});return l.convertFileSrc||(l.convertFileSrc=b=>b),l.getPlatform=j,l.handleError=b=>r.console.error(b),l.isNativePlatform=ue,l.isPluginAvailable=fe,l.pluginMethodNoop=(b,w,M)=>Promise.reject(`${M} does not have an implementation of "${w}".`),l.registerPlugin=Pe,l.Exception=F,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},$=(r=>r.Capacitor=q(r))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),J=$.registerPlugin;class N{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){var a=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const m=function(){var y=(0,f.Z)(function*(){return a.removeListener(e,n)});return function(){return y.apply(this,arguments)}}(),l=Promise.resolve({remove:m});return Object.defineProperty(l,"remove",{value:(y=(0,f.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield m()}),function(){return y.apply(this,arguments)})}),l;var y}removeAllListeners(){var e=this;return(0,f.Z)(function*(){e.listeners={};for(const n in e.windowListeners)e.removeWindowListener(e.windowListeners[n]);e.windowListeners={}})()}notifyListeners(e,n){const a=this.listeners[e];a&&a.forEach(c=>c(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:a=>{this.notifyListeners(n,a)}}}unimplemented(e="not implemented"){return new $.Exception(e,E.Unimplemented)}unavailable(e="not available"){return new $.Exception(e,E.Unavailable)}removeListener(e,n){var a=this;return(0,f.Z)(function*(){const c=a.listeners[e];if(!c)return;const s=c.indexOf(n);a.listeners[e].splice(s,1),a.listeners[e].length||a.removeWindowListener(a.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const Q=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class V extends N{getCookies(){return(0,f.Z)(function*(){const e=document.cookie,n={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[c,s]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=D(c).trim(),s=D(s).trim(),n[c]=s}),n})()}setCookie(e){return(0,f.Z)(function*(){try{const n=Q(e.key),a=Q(e.value),c=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),m=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${a||""}${c}; path=${s}; ${m};`}catch(n){return Promise.reject(n)}})()}deleteCookie(e){return(0,f.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})()}clearCookies(){return(0,f.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,f.Z)(function*(){try{yield e.clearCookies()}catch(n){return Promise.reject(n)}})()}}J("CapacitorCookies",{web:()=>new V});const i=function(){var r=(0,f.Z)(function*(e){return new Promise((n,a)=>{const c=new FileReader;c.onload=()=>{const s=c.result;n(s.indexOf(",")>=0?s.split(",")[1]:s)},c.onerror=s=>a(s),c.readAsDataURL(e)})});return function(n){return r.apply(this,arguments)}}(),d=(r,e={})=>{const n=Object.assign({method:r.method||"GET",headers:r.headers},e),c=((r={})=>{const e=Object.keys(r);return Object.keys(r).map(c=>c.toLocaleLowerCase()).reduce((c,s,m)=>(c[s]=r[e[m]],c),{})})(r.headers)["content-type"]||"";if("string"==typeof r.data)n.body=r.data;else if(c.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[m,l]of Object.entries(r.data||{}))s.set(m,l);n.body=s.toString()}else if(c.includes("multipart/form-data")){const s=new FormData;if(r.data instanceof FormData)r.data.forEach((l,y)=>{s.append(y,l)});else for(const l of Object.keys(r.data))s.append(l,r.data[l]);n.body=s;const m=new Headers(n.headers);m.delete("content-type"),n.headers=m}else(c.includes("application/json")||"object"==typeof r.data)&&(n.body=JSON.stringify(r.data));return n};class u extends N{request(e){return(0,f.Z)(function*(){const n=d(e,e.webFetchExtra),a=((r,e=!0)=>r?Object.entries(r).reduce((a,c)=>{const[s,m]=c;let l,y;return Array.isArray(m)?(y="",m.forEach(p=>{l=e?encodeURIComponent(p):p,y+=`${s}=${l}&`}),y.slice(0,-1)):(l=e?encodeURIComponent(m):m,y=`${s}=${l}`),`${a}&${y}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),c=a?`${e.url}?${a}`:e.url,s=yield fetch(c,n),m=s.headers.get("content-type")||"";let y,p,{responseType:l="text"}=s.ok?e:{};switch(m.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":p=yield s.blob(),y=yield i(p);break;case"json":y=yield s.json();break;default:y=yield s.text()}const z={};return s.headers.forEach((j,X)=>{z[X]=j}),{data:y,headers:z,status:s.status,url:s.url}})()}get(e){var n=this;return(0,f.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var n=this;return(0,f.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var n=this;return(0,f.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var n=this;return(0,f.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var n=this;return(0,f.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}J("CapacitorHttp",{web:()=>new u})},8298:(Y,k,h)=>{h.d(k,{ez:()=>A,tP:()=>f});var f=function(g){return g.Documents="DOCUMENTS",g.Data="DATA",g.Library="LIBRARY",g.Cache="CACHE",g.External="EXTERNAL",g.ExternalStorage="EXTERNAL_STORAGE",g}(f||{}),A=function(g){return g.UTF8="utf8",g.ASCII="ascii",g.UTF16="utf16",g}(A||{})},7538:(Y,k,h)=>{h.r(k),h.d(k,{PhotothequePageModule:()=>se});var f=h(6733),A=h(2133),P=h(1359),v=h(7579),g=h(8239),t=h(7170),G=h(6352),E=h(1236);const F=(0,G.fo)("Camera",{web:()=>h.e(7457).then(h.bind(h,7457)).then(i=>new i.CameraWeb)});var W=h(8298);const q=(0,G.fo)("Filesystem",{web:()=>h.e(8871).then(h.bind(h,8871)).then(i=>new i.FilesystemWeb)}),B=(0,G.fo)("Preferences",{web:()=>h.e(3054).then(h.bind(h,3054)).then(i=>new i.PreferencesWeb)});let $=(()=>{class i{constructor(o){this.platform=o,this.photos=[],this.PHOTO_STORAGE="photos",this.convertBlobToBase64=d=>new Promise((u,O)=>{const r=new FileReader;r.onerror=O,r.onload=()=>{u(r.result)},r.readAsDataURL(d)})}loadSaved(){var o=this;return(0,g.Z)(function*(){const{value:d}=yield B.get({key:o.PHOTO_STORAGE});o.photos=d?JSON.parse(d):[];for(let u of o.photos){const O=yield q.readFile({path:u.filepath,directory:W.tP.Data});u.webviewPath=`data:image/jpeg;base64,${O.data}`}})()}addNewToGallery(){var o=this;return(0,g.Z)(function*(){const d=yield F.getPhoto({resultType:E.dk.Uri,quality:100}),u=yield o.savePicture(d);o.photos.unshift(u),B.set({key:o.PHOTO_STORAGE,value:JSON.stringify(o.photos)})})()}addNewToCamera(){var o=this;return(0,g.Z)(function*(){const d=yield F.getPhoto({resultType:E.dk.Uri,source:E.oK.Camera,quality:100}),u=yield o.savePicture(d);o.photos.unshift(u),B.set({key:o.PHOTO_STORAGE,value:JSON.stringify(o.photos)})})()}savePicture(o){var d=this;return(0,g.Z)(function*(){const u=yield d.readAsBase64(o),O=(new Date).getTime()+".jpeg";return yield q.writeFile({path:O,data:u,directory:W.tP.Data}),{filepath:O,webviewPath:o.webPath}})()}readAsBase64(o){var d=this;return(0,g.Z)(function*(){const O=yield(yield fetch(o.webPath)).blob();return yield d.convertBlobToBase64(O)})()}deletePicture(o,d){var u=this;return(0,g.Z)(function*(){u.photos.splice(d,1),B.set({key:u.PHOTO_STORAGE,value:JSON.stringify(u.photos)});const O=o.filepath.substr(o.filepath.lastIndexOf("/")+1);yield q.deleteFile({path:O,directory:W.tP.Data})})()}showPicture(o,d){return(0,g.Z)(function*(){const u=o.filepath.substr(o.filepath.lastIndexOf("/")+1);return console.log(u),o})()}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(P.t4))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function J(i,C){if(1&i){const o=t.EpF();t.TgZ(0,"ion-col",13)(1,"ion-img",14),t.NdJ("click",function(){const u=t.CHM(o),O=u.$implicit,r=u.index,e=t.oxw(2);return t.KtG(e.showActionSheet(O,r))}),t.qZA()()}if(2&i){const o=C.$implicit;t.xp6(1),t.Q6J("src",o.webviewPath)}}function oe(i,C){if(1&i&&(t.TgZ(0,"ion-row",11),t.YNc(1,J,2,1,"ion-col",12),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.photoService.photos)}}function re(i,C){if(1&i){const o=t.EpF();t.TgZ(0,"ion-row",11)(1,"ion-button",15),t.NdJ("click",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.closeImage())}),t._uU(2," Fermer x "),t.qZA(),t.TgZ(3,"ion-col",16),t._UZ(4,"ion-img",17),t.qZA()()}if(2&i){const o=t.oxw();t.xp6(4),t.Q6J("src",o.newimage)}}function N(i,C){if(1&i){const o=t.EpF();t.TgZ(0,"ion-fab",18)(1,"ion-fab-button",19),t.NdJ("click",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.photoService.addNewToCamera())}),t._UZ(2,"ion-icon",20),t.qZA()()}}function ie(i,C){if(1&i){const o=t.EpF();t.TgZ(0,"ion-fab",21)(1,"ion-button",22),t.NdJ("click",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.photoService.addNewToGallery())}),t._UZ(2,"ion-icon",23),t.qZA()()}}const D=[{path:"",component:(()=>{class i{constructor(o,d,u){this.photoService=o,this.actionSheetController=d,this.router=u}ngOnInit(){var o=this;return(0,g.Z)(function*(){yield o.photoService.loadSaved()})()}ionViewWillEnter(){this.newimage=""}showActionSheet(o,d){var u=this;return(0,g.Z)(function*(){yield(yield u.actionSheetController.create({header:"Photo",buttons:[{text:"Voir",role:"destructive",icon:"eye",handler:()=>{console.log(o),u.newimage=o.webviewPath}},{text:"Supprimer",role:"destructive",icon:"trash",handler:()=>{u.photoService.deletePicture(o,d)}},{text:"Annuler",icon:"close",role:"cancel",handler:()=>{}}]})).present()})()}closeImage(){var o=this;return(0,g.Z)(function*(){o.newimage=""})()}goHome(){var o=this;return(0,g.Z)(function*(){o.router.navigateByUrl("/home")})()}goMenu(){var o=this;return(0,g.Z)(function*(){o.router.navigateByUrl("/menu")})()}}return i.\u0275fac=function(o){return new(o||i)(t.Y36($),t.Y36(P.BX),t.Y36(v.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-phototheque"]],decls:16,vars:4,consts:[["mode","ios"],["src","assets/imgs/navbar/logo.svg","width","100px"],["slot","start"],["ion-button","","icon-only","","color","medium",3,"click"],["name","chevron-back-outline"],["slot","end"],["ion-button","","icon-only","","color","primary",3,"click"],["name","apps"],["style","padding-top: 70px;",4,"ngIf"],["vertical","top","horizontal","center","slot","fixed",4,"ngIf"],["vertical","top","horizontal","start","slot","fixed",4,"ngIf"],[2,"padding-top","70px"],["size","6",4,"ngFor","ngForOf"],["size","6"],[3,"src","click"],["ion-button","","color","primary","fill","outline",3,"click"],["size","12"],[3,"src"],["vertical","top","horizontal","center","slot","fixed"],[3,"click"],["name","camera-outline"],["vertical","top","horizontal","start","slot","fixed"],["color","light",2,"padding-top","5px",3,"click"],["name","cloud-upload-outline"]],template:function(o,d){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._UZ(3,"img",1),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return d.goHome()}),t._UZ(6,"ion-icon",4),t.qZA()(),t.TgZ(7,"ion-buttons",5)(8,"ion-button",6),t.NdJ("click",function(){return d.goHome()}),t._UZ(9,"ion-icon",7),t.qZA()()()(),t.TgZ(10,"ion-content")(11,"ion-grid"),t.YNc(12,oe,2,1,"ion-row",8),t.YNc(13,re,5,1,"ion-row",8),t.qZA(),t.YNc(14,N,3,0,"ion-fab",9),t.YNc(15,ie,3,0,"ion-fab",10),t.qZA()),2&o&&(t.xp6(12),t.Q6J("ngIf",!d.newimage),t.xp6(1),t.Q6J("ngIf",d.newimage),t.xp6(1),t.Q6J("ngIf",!d.newimage),t.xp6(1),t.Q6J("ngIf",!d.newimage))},dependencies:[f.sg,f.O5,P.YG,P.Sm,P.wI,P.W2,P.IJ,P.W4,P.jY,P.Gu,P.gu,P.Xz,P.Nd,P.wd,P.sr],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: translucent}"]}),i})()}];let V=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[v.Bz.forChild(D),v.Bz]}),i})(),se=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.ez,A.u5,P.Pc,V]}),i})()}}]);